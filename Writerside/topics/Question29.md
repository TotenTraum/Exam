# Вопрос 30

Когда речь идет о паттернах сохраняемости (persistence patterns), обычно имеются в виду различные подходы и шаблоны проектирования, используемые для сохранения данных в постоянное хранилище, такое как база данных или файловая система. 

## Загрузка по требованию (Lazy Load)

<tip>
Объект, который не содержит все требующиеся данные,
однако может загрузить их в случае необходимости
</tip>

Lazy Load - это техника, которая позволяет отложить загрузку данных до момента, когда они действительно понадобятся. Это особенно полезно, когда имеется большой объем данных или связанные объекты, и загрузка их всех сразу может быть слишком ресурсоемкой операцией. Вместо этого, данные загружаются по требованию, когда к ним обращаются в коде.

Преимущества использования Lazy Load:
* Экономия ресурсов: Загрузка данных только по требованию позволяет снизить использование ресурсов, таких как память и сетевые запросы.
* Улучшенная производительность: Загрузка данных по мере необходимости может улучшить производительность приложения, особенно если имеется большой объем данных или долгие операции загрузки.
* Улучшенная отзывчивость: Загрузка данных по требованию может повысить отзывчивость приложения, поскольку пользователь получает только необходимую информацию в данный момент.

```Kotlin
    class Order(val orderId: Long) {
        private var customer: Customer? = null
    
        fun getCustomer(): Customer {
            if (customer == null) {
                customer = loadCustomerFromDatabase()
            }
            return customer!!
        }
    
        private fun loadCustomerFromDatabase(): Customer {
            // Логика загрузки данных покупателя из базы данных
            println("Loading customer from database for order $orderId")
            return Customer("John Doe")
        }
    }
    
    class Customer(val name: String) {
        // ...
    }
    
    fun main() {
        val order = Order(1)
        val customer = order.getCustomer()
        println("Customer name: ${customer.name}")
    }
```
